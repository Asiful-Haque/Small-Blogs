React State Management: Primitive vs Reference Values ЁЯЪА

React-ржП Primitive Values ржПржмржВ Reference Values рж╕рзНржЯрзЗржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗ ржнрж┐ржирзНржиржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред ржнрзБрж▓рзЗ ржЧрзЗрж▓рзЗ ржХрж┐ржирзНрждрзБ ржмрж╛ржЧ ржЦрзЗрждрзЗ рж╣ржпрж╝! ЁЯШЕ 

ЁЯФ╣ Primitive Values (Numbers, Strings, Boolean, etc.)
Primitive Value рж╣рж▓рзЛ pass by value, рждрж╛ржЗ ржпржЦржи ржЖржорж░рж╛ ржирждрзБржи ржнрзНржпрж╛рж▓рзБ рж╕рзЗржЯ ржХрж░рж┐, React ржжрзЗржЦрзЗ ржЖржЧрзЗрж░ ржнрзНржпрж╛рж▓рзБрж░ ржЪрзЗржпрж╝рзЗ ржЖрж▓рж╛ржжрж╛ ржХрж┐ржирж╛ред

const [count, setCount] = useState(1); 

setCount(5); // тЬЕ New value, so re-render рж╣ржмрзЗред
setCount(1); // тЭМ ржЖржЧрзЗрж░ ржнрзНржпрж╛рж▓рзБ 1, ржирждрзБржиржУ 1 - рждрж╛ржЗ re-render рж╣ржмрзЗ ржирж╛ред

ЁЯСЙ рждрж╛ржЗ рж░рзБрж▓ рж╣ржЪрзНржЫрзЗ: ржирждрзБржи ржнрзНржпрж╛рж▓рзБ ржкрзБрж░рзЛржирзЛ ржнрзНржпрж╛рж▓рзБрж░ ржЪрзЗржпрж╝рзЗ ржЖрж▓рж╛ржжрж╛ рж╣рж▓рзЗ re-render рж╣ржмрзЗ, ржЖрж░ ржпржжрж┐ ржПржХржЗ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ React ржХрж┐ржЫрзБржЗ ржХрж░ржмрзЗ ржирж╛!


ЁЯФ╣ Reference Values (Objects, Arrays, Functions, etc.)
Reference values pass by reference рж╣ржпрж╝, рждрж╛ржЗ рж╢рзБржзрзБ ржнрзЗрждрж░рзЗрж░ ржбрж╛ржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ ржЪрж▓ржмрзЗ ржирж╛!

const [state, setState] = useState({ score: 1 }); 

тЭМ ржнрзБрж▓ ржкржжрзНржзрждрж┐:

state.score = 5; setState(state); // тЭМ Directly modify ржХрж░рж▓рзЗ React ржмрзБржЭржмрзЗ ржирж╛ ржпрзЗ state ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗржЫрзЗ! No re-render.

рж░рж┐ржПржХрзНржЯ ржнрж╛ржмрзЗ ржпрзЗ ржЖржорж╛рж░ ржХрж╛ржЫрзЗ рждрзЛ рж╕рзЗржо state ржПрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржЖржЫрзЗржЗ,ржирждрзБржи ржХрж░рзЗ ржЖржмрж╛рж░ ржПржХржЗ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржХрзЛржирзЛ ржжрж░ржХрж╛рж░ ржЗ ржирзЗржЗред ЁЯШ╡тАНЁЯТл
рждрзЛ ржПржЯрж╛рж░ рж╕ржорж╛ржзрж╛ржи рж╣рж┐рж╕рзЗржмрзЗ ржЖржорж░рж╛ spread operator ржмрзНржпрж╛ржмрж╣рж╛рж░ ржХрж░рзЗ ржирждрзБржиржнрж╛ржмрзЗ рж╕рзНржЯрзЗржЯ ржЯрж╛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

тЬЕ рж╕ржарж┐ржХ ржкржжрзНржзрждрж┐:

setState({ ...state, score: 5 }); // тЬЕ ржкрзБрж░рзЛржирзЛ state ржХржкрж┐ рж╣ржЪрзНржЫрзЗ ржПржмржВ ржирждрзБржи ржнрзНржпрж╛рж▓рзБ ржУ рж╕рзЗржЯ рж╣ржЪрзНржЫрзЗред 

ржпрзЗржоржи :
const [state, setState] = useState({ score: 1 });

// Later...
setState({
 ...state,
 score: 5
});
ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржирждрзБржи ржХрж░рзЗ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ рждржмрзЗржЗ ржЖржорж░рж╛ рждрж╛ржХрзЗ ржкрж╛рж╕ ржХрж░ржЫрж┐редржПржЗ ржирждрзБржи ржХрж░рзЗ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржХрж╛ржЬржЯрж┐ ржХрж░рзЗ ржжрзЗржпрж╝ spread operator(...)
рж╕рзЗ (...)state ржжрж┐ржпрж╝рзЗ ржмрж░рзНрждржорж╛ржи state ржЯрж╛ ржЕрж░рзНржерж╛рзО ржкрзВрж░рзНржмржмрж░рзНрждрзА reference value ржХржкрж┐ ржХрж░рзЗ ржирзЗржпрж╝ ржПржмржВ рж╕рж╛ржерзЗ ржирждрзБржи ржХрж░рзЗ ржирждрзБржи ржнрзНржпрж╛рж▓рзБ ржжрж┐ржпрж╝рзЗ ржирждрзБржи ржПржХржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рзА ржХрж░рзЗ ржкрж╛рж╕ ржХрж░рзЗ ржжрзЗржпрж╝редрждржЦржи ржмрзНржпрж╛ржкрж╛рж░ржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗред ржПржЦрж╛ржирзЗ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ, рждрж╛ржЗ React ржмрзБржЭржмрзЗ State ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ re-render ржХрж░ржмрзЗ!

ржПржХржЗ ржмрзНржпрж╛ржкрж╛рж░ ржЕрзНржпрж╛рж░рзЗрж░ ржмрзЗрж▓рж╛ржпрж╝ ржУ рж╣ржпрж╝:
const [arr, setArr] = useState([1, 2, 3]); 
arr.push(4);
setArr(arr); // тЭМ ржнрзБрж▓ - ржЖржЧрзЗрж░ reference ржкрж╛рж╕ ржХрж░рж▓рзЗ re-render рж╣ржмрзЗ ржирж╛ 

setArr([...arr, 4]); // тЬЕ рж╕ржарж┐ржХ - ржирждрзБржи reference ржкрж╛рж╕ ржХрж░рж▓рзЗ re-render рж╣ржмрзЗ 
React рж╢рзБржзрзБ рждржЦржиржЗ re-render ржХрж░ржмрзЗ, ржпржЦржи ржирждрзБржи рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржкрж╛ржмрзЗ! ЁЯЪА


ЁЯФД Re-render рж╣ржмрзЗ ржирж╛ржХрж┐ рж╣ржмрзЗ ржирж╛?
тЬЕ ржпржжрж┐ Primitive Value ржЖрж▓рж╛ржжрж╛ рж╣ржпрж╝ тЖТ re-render рж╣ржмрзЗ
тЭМ ржпржжрж┐ Primitive Value ржПржХржЗ ржерж╛ржХрзЗ тЖТ re-render рж╣ржмрзЗ ржирж╛
тЬЕ ржпржжрж┐ ржирждрзБржи Object/Array рждрзИрж░рж┐ рж╣ржпрж╝ тЖТ re-render рж╣ржмрзЗ
тЭМ ржпржжрж┐ ржкрзБрж░рзЛржирзЛ Object/Array рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝ тЖТ re-render рж╣ржмрзЗ ржирж╛



тЬи Final Thought:
React-ржП state ржЗржорж┐ржЙржЯрзЗржмрж▓ (immutable), рждрж╛ржЗ рж╕рж░рж╛рж╕рж░рж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ ржЪрж▓ржмрзЗ ржирж╛ред ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ рж╕рж░рж╛рж╕рж░рж┐ ржЖржкржбрзЗржЯ ржХрж░рж╛ ржпрж╛ржпрж╝, ржХрж┐ржирзНрждрзБ ржЕржмржЬрзЗржХрзНржЯ ржмрж╛ ржЕрзНржпрж╛рж░рзЗ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржирждрзБржи ржХржкрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗ!
ржПржЯрж╛ React performance optimization-ржПрж░ ржПржХржЯрж╛ рж░рж╣рж╕рзНржп! ЁЯШОЁЯФе
